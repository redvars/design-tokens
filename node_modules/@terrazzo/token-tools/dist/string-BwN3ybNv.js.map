{"version":3,"file":"string-BwN3ybNv.js","names":["CULORI_TO_CSS: Record<\n  Extract<\n    Color['mode'],\n    | 'a98'\n    | 'lab'\n    | 'lab65'\n    | 'lch'\n    | 'oklab'\n    | 'oklch'\n    | 'okhsv'\n    | 'hsl'\n    | 'hwb'\n    | 'lrgb'\n    | 'p3'\n    | 'prophoto'\n    | 'rec2020'\n    | 'rgb'\n    | 'xyz50'\n    | 'xyz65'\n  >,\n  ColorSpace\n>","color: string","components: [number, number, number]","value: ColorValueNormalized","COLORSPACE: Record<ColorSpace, ColorSpaceDefinition>","input: string","length: number","alignment: 'left' | 'center' | 'right'","count: number","singular: T","plural: T","str: string"],"sources":["../src/color.ts","../src/string.ts"],"sourcesContent":["import 'culori/css';\nimport { type Color, formatHex, parse } from 'culori/fn';\nimport type { ColorSpace, ColorValueNormalized } from './types.js';\n\nconst HEX_RE = /^#?([0-9a-f]{8}|[0-9a-f]{6}|[0-9a-f]{4}|[0-9a-f]{3})$/i;\n\nexport const CULORI_TO_CSS: Record<\n  Extract<\n    Color['mode'],\n    | 'a98'\n    | 'lab'\n    | 'lab65'\n    | 'lch'\n    | 'oklab'\n    | 'oklch'\n    | 'okhsv'\n    | 'hsl'\n    | 'hwb'\n    | 'lrgb'\n    | 'p3'\n    | 'prophoto'\n    | 'rec2020'\n    | 'rgb'\n    | 'xyz50'\n    | 'xyz65'\n  >,\n  ColorSpace\n> = {\n  a98: 'a98-rgb',\n  hsl: 'hsl',\n  hwb: 'hwb',\n  lab: 'lab',\n  lab65: 'lab-d65',\n  lch: 'lch',\n  lrgb: 'srgb-linear',\n  oklab: 'oklab',\n  oklch: 'oklch',\n  okhsv: 'okhsv',\n  p3: 'display-p3',\n  prophoto: 'prophoto-rgb',\n  rec2020: 'rec2020',\n  rgb: 'srgb',\n  xyz50: 'xyz-d50',\n  xyz65: 'xyz-d65',\n} as const;\n\nexport const CSS_TO_CULORI = {\n  'a98-rgb': 'a98',\n  'display-p3': 'p3',\n  hsl: 'hsl',\n  hwb: 'hwb',\n  lab: 'lab',\n  'lab-d65': 'lab65',\n  lch: 'lch',\n  oklab: 'oklab',\n  oklch: 'oklch',\n  okhsv: 'okhsv',\n  'prophoto-rgb': 'prophoto',\n  rec2020: 'rec2020',\n  srgb: 'rgb',\n  'srgb-linear': 'lrgb',\n  xyz: 'xyz65',\n  'xyz-d50': 'xyz50',\n  'xyz-d65': 'xyz65',\n} as const;\n\n/** Parse any color */\nexport function parseColor(color: string): ColorValueNormalized {\n  const result = parse(color);\n  if (!result) {\n    throw new Error(`Unable to parse color \"${color}\"`);\n  }\n  if (!(result.mode in CULORI_TO_CSS)) {\n    throw new Error(`Unsupported color space: ${result.mode}`);\n  }\n  const colorSpace = CULORI_TO_CSS[result.mode as keyof typeof CULORI_TO_CSS]!;\n  let components: [number, number, number] = [0, 0, 0];\n  switch (result.mode) {\n    case 'a98':\n    case 'rec2020':\n    case 'p3':\n    case 'prophoto':\n    case 'lrgb':\n    case 'rgb': {\n      components = [result.r, result.g, result.b];\n      break;\n    }\n    case 'hsl': {\n      const maxS = COLORSPACE[colorSpace].ranges[1]?.[1] ?? 1.0;\n      const maxL = COLORSPACE[colorSpace].ranges[2]?.[1] ?? 1.0;\n      components = [result.h ?? 0, result.s * maxS, result.l * maxL];\n      break;\n    }\n    case 'hwb': {\n      const maxW = COLORSPACE[colorSpace].ranges[1]?.[1] ?? 1.0;\n      const maxB = COLORSPACE[colorSpace].ranges[2]?.[1] ?? 1.0;\n      components = [result.h ?? 0, result.w * maxW, result.b * maxB];\n      break;\n    }\n    case 'lab':\n    case 'lab65':\n    case 'oklab': {\n      components = [result.l, result.a, result.b];\n      break;\n    }\n    case 'lch':\n    case 'oklch': {\n      components = [result.l, result.c, result.h ?? 0];\n      break;\n    }\n    case 'okhsv': {\n      components = [result.h ?? 0, result.s, result.v];\n      break;\n    }\n    case 'xyz50':\n    case 'xyz65': {\n      components = [result.x, result.y, result.z];\n      break;\n    }\n  }\n  const value: ColorValueNormalized = {\n    colorSpace,\n    components,\n    alpha: result.alpha ?? 1,\n  };\n  if (HEX_RE.test(color)) {\n    // Note: this intentionally does NOT include alpha; it’s already in alpha.\n    // Always use formatHex (not formatHex8).\n    value.hex = formatHex(result);\n  }\n  return value;\n}\n\n/** Convert a color token to a Culori color */\nexport function tokenToCulori(value: ColorValueNormalized): Color | undefined {\n  switch (value.colorSpace) {\n    case 'a98-rgb':\n    case 'display-p3':\n    case 'prophoto-rgb':\n    case 'rec2020':\n    case 'srgb':\n    case 'srgb-linear': {\n      const [r, g, b] = value.components;\n      return {\n        mode: CSS_TO_CULORI[value.colorSpace] || value.colorSpace,\n        r,\n        g,\n        b,\n        alpha: value.alpha,\n      } as Color;\n    }\n    case 'hsl': {\n      const [h, s, l] = value.components;\n      const maxS = COLORSPACE[value.colorSpace].ranges[1]?.[1] ?? 1;\n      const maxL = COLORSPACE[value.colorSpace].ranges[2]?.[1] ?? 1;\n      return { mode: 'hsl', h, s: s / maxS, l: l / maxL, alpha: value.alpha };\n    }\n    case 'hwb': {\n      const [h, w, b] = value.components;\n      const maxW = COLORSPACE[value.colorSpace].ranges[1]?.[1] ?? 1;\n      const maxB = COLORSPACE[value.colorSpace].ranges[2]?.[1] ?? 1;\n      return { mode: 'hwb', h, w: w / maxW, b: b / maxB, alpha: value.alpha };\n    }\n    case 'lab':\n    case 'lab-d65':\n    case 'oklab': {\n      const [l, a, b] = value.components;\n      const mode = value.colorSpace === 'lab-d65' ? 'lab65' : value.colorSpace;\n      return { mode, l, a, b, alpha: value.alpha };\n    }\n    case 'lch':\n    case 'oklch': {\n      const [l, c, h] = value.components;\n      return { mode: value.colorSpace, l, c, h, alpha: value.alpha };\n    }\n    case 'okhsv': {\n      const [h, s, v] = value.components;\n      return { mode: value.colorSpace, h, s, v, alpha: value.alpha };\n    }\n    case 'xyz':\n    case 'xyz-d50':\n    case 'xyz-d65': {\n      const [x, y, z] = value.components;\n      return { mode: CSS_TO_CULORI[value.colorSpace], x, y, z, alpha: value.alpha };\n    }\n    default: {\n      throw new Error(\n        `Invalid colorSpace \"${value.colorSpace}\". Expected one of ${Object.keys(CSS_TO_CULORI).join(', ')}`,\n      );\n    }\n  }\n}\n\nexport interface ColorSpaceDefinition {\n  ranges: [min: number, max: number][];\n}\n\n/** Complete list of CSS Module 4 Colorspaces */\nexport const COLORSPACE: Record<ColorSpace, ColorSpaceDefinition> = {\n  'a98-rgb': {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  'display-p3': {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  hsl: {\n    ranges: [\n      [0.0, 360.0],\n      [0.0, 100.0],\n      [0.0, 100.0],\n    ],\n  },\n  hwb: {\n    ranges: [\n      [0.0, 360.0],\n      [0.0, 100.0],\n      [0.0, 100.0],\n    ],\n  },\n  lab: {\n    ranges: [\n      [0.0, 100.0],\n      [-125.0, 125.0],\n      [-125.0, 125.0],\n    ],\n  },\n  'lab-d65': {\n    ranges: [\n      [0.0, 100.0],\n      [-125.0, 125.0],\n      [-125.0, 125.0],\n    ],\n  },\n  lch: {\n    ranges: [\n      [0.0, 100.0],\n      [0, 150.0],\n      [0.0, 360.0],\n    ],\n  },\n  oklab: {\n    ranges: [\n      [0.0, 1.0],\n      [-0.4, 0.4],\n      [-0.4, 0.4],\n    ],\n  },\n  oklch: {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 0.4],\n      [0.0, 360.0],\n    ],\n  },\n  okhsv: {\n    ranges: [\n      [0.0, 360.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  'prophoto-rgb': {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  rec2020: {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  srgb: {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  'srgb-linear': {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  'xyz-d50': {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  xyz: {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n  'xyz-d65': {\n    ranges: [\n      [0.0, 1.0],\n      [0.0, 1.0],\n      [0.0, 1.0],\n    ],\n  },\n};\n","/** Pad string lengths */\nexport function padStr(input: string, length: number, alignment: 'left' | 'center' | 'right' = 'left'): string {\n  const d =\n    Math.min(length || 0, 1000) - // guard against NaNs and Infinity\n    input.length;\n  if (d > 0) {\n    switch (alignment) {\n      case 'left': {\n        return `${input}${' '.repeat(d)}`;\n      }\n      case 'right': {\n        return `${' '.repeat(d)}${input}`;\n      }\n      case 'center': {\n        const left = Math.floor(d / 2);\n        const right = d - left;\n        return `${' '.repeat(left)}${input}${' '.repeat(right)}`;\n      }\n    }\n  }\n  return input;\n}\n\n/** Pluralize strings */\nexport function pluralize<T = string>(count: number, singular: T, plural: T): T {\n  return count === 1 ? singular : plural;\n}\n\n/** Turn a string into kebab-case */\nexport function kebabCase(str: string): string {\n  let output = '';\n  for (const c of str.split('')) {\n    if (c === '.') {\n      output += '-';\n      continue;\n    }\n    let isFirstUppercase = true;\n    if (isFirstUppercase && /\\p{Uppercase_Letter}/u.test(c)) {\n      output += `-${c.toLocaleLowerCase()}`;\n      isFirstUppercase = false; // don’t break apart multiple consecutive uppercase letters\n      continue;\n    } else {\n      isFirstUppercase = true; // reset\n    }\n\n    output += c;\n  }\n  return output;\n}\n"],"mappings":"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"}